---
title: ã‚¢ãƒªãƒãƒã®ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯ã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°~useToggleç·¨~
date: '2020-07-15T17:00:00Z'
description: ''
featured: false
cover: ./cover.jpeg
tags:
  - React
  - Hooks
---

import Callout from '../../../src/components/widgetComponents/Callout';
import ExternalLink from '../../../src/components/widgetComponents/ExternalLink';

## ã‚¢ãƒªãƒãƒã®ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯ã‚’ã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°

React ã®ç†è§£ã‚’æ·±ã‚ã‚‹ãŸã‚ã«ã€ã‚¢ãƒªãƒãƒã®ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯ã®ã‚³ãƒ¼ãƒ‰ã‚’èª­ã‚“ã§ã„ã“ã†ã¨æ€ã„ã¾ã™ï¼

ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯ã¨ã¯`use`ã‹ã‚‰å§‹ã¾ã‚Šã»ã‹ã®ãƒ•ãƒƒã‚¯ã‚’å‘¼ã³å‡ºã›ã‚‹é–¢æ•°ã§ã™ã€‚  
è‡ªåˆ†ç‹¬è‡ªã®ãƒ•ãƒƒã‚¯ã‚’ä½œæˆã™ã‚‹ã“ã¨ã§ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‹ã‚‰ React ã®ãƒ­ã‚¸ãƒƒã‚¯ã‚’æŠ½å‡ºã—ã¦å†åˆ©ç”¨å¯èƒ½ãªé–¢æ•°ã‚’ä½œã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ï¼

OSS ã¨ã—ã¦å¤šãã®ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯ãŒå…¬é–‹ã•ã‚Œã¦ã„ã‚‹ãªã‹ã§ã‚¢ãƒªãƒãƒã‚’é¸ã‚“ã ç†ç”±ã¯ã€  
ã‚ã‹ã‚Šã‚„ã™ã„ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒç”¨æ„ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã€æœ‰åä¼æ¥­ã§ã‚ã‚‹ã“ã¨ã€GitHub ã® Star æ•°ãŒå¤šã„ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚

- <ExternalLink href='https://ahooks.js.org/'>ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</ExternalLink>{' '}
- <ExternalLink href='https://github.com/alibaba/hooks/'>GitHub</ExternalLink>

## useToggle ãƒ•ãƒƒã‚¯

`useHover`ã¯ element ãŒ hover ä¸­ã‹ãã†ã§ãªã„ã‹ã‚’åˆ¤å®šã—ã¾ã™ã€‚

å¼•æ•°ã¨ã—ã¦ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã¨ãªã‚‹ã‚¨ãƒ¬ãƒ¡ãƒ³ãƒˆã€ãƒ›ãƒãƒ¼æ™‚ãƒ»ãƒ›ãƒãƒ¼ãŒå¤–ã‚ŒãŸã¨ãã®å‡¦ç†ã‚’å—ã‘å–ã‚Šã€  
hover ä¸­ã‹ã©ã†ã‹ã®çœŸå½å€¤ã‚’è¿”ã—ã¾ã™ã€‚

### API

```js
const [state, { toggle, setLeft, setRight }] = useToggle(
  defaultValue?: boolean,
);
const [state, { toggle, setLeft, setRight }] = useToggle(
  defaultValue: any = false,
  reverseValue?: any,
);
```

### å¼•æ•°

| Property     | Description                  | Type                                     | Default |
| ------------ | ---------------------------- | ---------------------------------------- | ------- |
| defaultValue | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‚’è¨­å®š           | number \| string \| boolean \| undefined | false   |
| reverseValue | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã§ã¯ãªã„å€¤ã‚’è¨­å®š | number \| string \| boolean \| undefined | -       |

### æˆ»ã‚Šå€¤

| Property | Description                  | Type   |
| -------- | ---------------------------- | ------ |
| state    | state ã®å€¤                   | -      |
| actions  | state ã®å€¤ã‚’æ›´æ–°ã™ã‚‹é–¢æ•°ãŸã¡ | object |

### æˆ»ã‚Šå€¤ã®é–¢æ•°ãŸã¡

| Property | Description                                  | Type                  |
| -------- | -------------------------------------------- | --------------------- |
| toggle   | state ã®å€¤ã‚’ç½®ãæ›ãˆã‚‹                       | (state?: any) => void |
| setLeft  | state ã®å€¤ã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã«ã‚»ãƒƒãƒˆã™ã‚‹           | () => void            |
| setRight | state ã®å€¤ã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ãªã„æ–¹ã«ã‚»ãƒƒãƒˆã™ã‚‹ | () => void            |

### Usage

```jsx demo
function Demo() {
  const [state, { toggle, setLeft, setRight }] = useToggle('Hello', 'World');

  return (
    <div>
      <p>Effectsï¼š{state}</p>
      <Stack isInline spacing='2'>
        <Button onClick={() => toggle()}>Toggle</Button>
        <Button onClick={() => toggle('Hello')}>Toggle Hello</Button>
        <Button onClick={() => toggle('World')}>Toggle World</Button>
        <Button onClick={setLeft}>Set Hello</Button>
        <Button onClick={setRight}>Set World</Button>
      </Stack>
    </div>
  );
}
```

<Callout emoji='ğŸ¥°'>ä½¿ã„æ‰€å¤šãã†ï¼ä½¿ã„å›ã›ã‚‹ã®ã§ä¾¿åˆ©ï¼ï¼</Callout>

## Let's ã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°!!!!

`useHover`ãŒã©ã‚“ãªã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯ã‹åˆ†ã‹ã£ãŸã®ã§ã€ã©ã‚“ãªå®Ÿè£…ã«ãªã£ã¦ã„ã‚‹ã‹ã‚³ãƒ¼ãƒ‰ã‚’èª­ã‚“ã§ã„ãã¾ã™ï¼

<Callout emoji='ğŸ™Œ'>
  ã“ã“ã‹ã‚‰ãŒæœ¬å‘½ï¼å®Ÿè£…ã‚’èª­ã‚ã°è‡ªåˆ†ã§ã‚‚è‰¯ã„ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯ã‚’ä½œã‚Œã¡ã‚ƒã†ã¯ãšï¼
</Callout>

### å…¨ä½“åƒ

```jsx title=hooks/blob/master/packages/hooks/src/useToggle/index.ts
import { useState, useMemo } from 'react';

type IState = string | number | boolean | undefined;

export interface Actions<T = IState> {
  setLeft: () => void;
  setRight: () => void;
  toggle: (value?: T) => void;
}

function useToggle<T = boolean | undefined>(): [boolean, Actions<T>];

function useToggle<T = IState>(defaultValue: T): [T, Actions<T>];

function useToggle<T = IState, U = IState>(
  defaultValue: T,
  reverseValue: U,
): [T | U, Actions<T | U>];

function useToggle<D extends IState = IState, R extends IState = IState>(
  defaultValue: D = false as D,
  reverseValue?: R,
) {
  const [state, setState] = useState<D | R>(defaultValue);
  const reverseValueOrigin = useMemo(
    () => (reverseValue === undefined ? !defaultValue : reverseValue) as D | R,
    [reverseValue],
  );

  const actions = useMemo(() => {
    // åˆ‡æ¢è¿”å›å€¼
    const toggle = (value?: D | R) => {
      // å¼ºåˆ¶è¿”å›çŠ¶æ€å€¼ï¼Œé€‚ç”¨äºç‚¹å‡»æ“ä½œ
      if (value !== undefined) {
        setState(value);
        return;
      }
      setState((s) => (s === defaultValue ? reverseValueOrigin : defaultValue));
    };
    // è®¾ç½®é»˜è®¤å€¼
    const setLeft = () => setState(defaultValue);
    // è®¾ç½®å–åå€¼
    const setRight = () => setState(reverseValueOrigin);
    return {
      toggle,
      setLeft,
      setRight,
    };
  }, [setState]);

  return [state, actions];
}

export default useToggle;
```

<ExternalLink href='https://github.com/alibaba/hooks/blob/master/packages/hooks/src/useToggle/index.ts'>
  GitHub
</ExternalLink>

### useToggle ã®æˆ»ã‚Šå€¤

ã¾ãšã€`useToggle`ã®æˆ»ã‚Šå€¤ã‚’ç¢ºèªã™ã‚‹ã€‚

```js
return [state, actions];
```

`state`ã¨`actions`ã‚’é…åˆ—ã§è¿”ã—ã¦ã„ã‚‹ ğŸ‘€

#### useToggle ã®æˆ»ã‚Šå€¤ state

ã¤ãã¯`state`ã‚’è¦‹ã¦ã¿ã‚‹ã€‚

```js
const [state, setState] = (useState < D) | (R > defaultValue);
```

defaultValue ã‚’åˆæœŸå€¤ã§çŠ¶æ…‹ã‚’ã‚‚ã£ã¦ã„ã‚‹ã®ã‹ ğŸ‘€

#### useToggle ã®æˆ»ã‚Šå€¤ actions

ã¤ãã¯`actions`ã‚’è¦‹ã¦ã¿ã‚‹ã€‚

```js
const actions = useMemo(() => {
  const toggle = (value?: D | R) => {
    if (value !== undefined) {
      setState(value);
      return;
    }
    setState(s => (s === defaultValue ? reverseValueOrigin : defaultValue));
  };
  const setLeft = () => setState(defaultValue);
  const setRight = () => setState(reverseValueOrigin);
  return {
    toggle,
    setLeft,
    setRight,
  };
}, [setState]);
```

ãƒ¡ãƒ¢åŒ–ã•ã‚ŒãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’è¿”ã—ã¦ã„ã¦ã€`setState`ãŒå¤‰æ›´ã•ã‚ŒãŸã¨ãã«å†è©•ä¾¡ã•ã‚Œã‚‹ ğŸ‘€  
ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å€¤ã¯ãã‚Œãã‚Œé–¢æ•°ãªã®ã§ãã‚Œã‚‰ã‚’è¦‹ã¦ã„ãã€‚

##### useToggle ã®æˆ»ã‚Šå€¤ actions ã® 1 ã¤ toggle é–¢æ•°

```js title=toggle
const toggle = (value?: D | R) => {
  if (value !== undefined) {
    setState(value);
    return;
  }
  setState(s => (s === defaultValue ? reverseValueOrigin : defaultValue));
};
```

`toggle`ã¯å¼•æ•°ã‚’ã†ã‘ã¨ã‚Œã°ã€ãã‚Œã‚’`setState`ã«ã‚ãŸã™ ğŸ‘€

å¼•æ•°ã‚’ã†ã‘ã¨ã‚‰ãªã‘ã‚Œã°ã€  
`state`ãŒ`defaultValue`ãªã‚‰`reverseValueOrigin`ã‚’ã€  
`defaultValue`ã§ãªã‘ã‚Œã°`defaultValue`ã‚’ã€
`setState`ã«ã‚ãŸã™ ğŸ‘€

`reverseValueOrigin`ã¨ã„ã†ã®ã¯ã€

```js title=reverseValueOrigin
const reverseValueOrigin = useMemo(
  () => (reverseValue === undefined ? !defaultValue : reverseValue) as D | R,
  [reverseValue],
);
```

ãƒ¡ãƒ¢åŒ–ã•ã‚ŒãŸå€¤ã§ã€`reverseValue`ãŒå¤‰æ›´ã•ã‚Œã‚‹ã¨å†è©•ä¾¡ã•ã‚Œã‚‹ ğŸ‘€  
ï¼ˆreverseValueã¯useToggle()ã®ç¬¬äºŒå¼•æ•°ï¼‰  
`reverseValue`ãŒ  
undefinedãªã‚‰`!defaultValue`ã‚’è¿”ã™ã—  
undefinedã§ãªã‘ã‚Œã°`reverseValue`ã‚’è¿”ã™ ğŸ‘€

<br />

ã¤ã¾ã‚Šã“ã‚“ãªæ„Ÿã˜ã‹ãªï¼Ÿ  
`toggle()`ã§å¼•æ•°ã«æ¸¡ã—ãŸã€ŒHelloã€ã¨ã€ŒWorldã€ã‚’ãƒˆã‚°ãƒ«ã™ã‚‹ã€‚  
`toggle('Macho')`ã¿ãŸã„ã«å¼•æ•°æ¸¡ã™ã¨ãã®å€¤ã«`state`ãŒå¤‰ã‚ã‚‹ã€‚

```jsx demo title=useToggleã«ç¬¬äºŒå¼•æ•°ã‚’æ¸¡ã—ãŸå ´åˆ
function Demo() {
  const [state, { toggle, setLeft, setRight }] = useToggle('Hello', 'World');

  return (
    <div>
      <p>Effectsï¼š{state}</p>
      <Stack isInline spacing='2'>
        <Button onClick={() => toggle()}>Toggle</Button>
        <Button onClick={() => toggle('Macho')}>Toggle Macho</Button>
        <Button onClick={() => toggle('Hello')}>Toggle Hello</Button>
        <Button onClick={() => toggle('World')}>Toggle World</Button>
      </Stack>
    </div>
  );
}
```

```jsx demo title=useToggleã«ç¬¬äºŒå¼•æ•°ã‚’æ¸¡ã•ãªã‹ã£ãŸå ´åˆ
function Demo() {
  const [state, { toggle, setLeft, setRight }] = useToggle('Hello');

  return (
    <div>
      <p>Effectsï¼š{state}</p>
      <Stack isInline spacing='2'>
        <Button onClick={() => toggle()}>Toggle</Button>
        <Button onClick={() => toggle('Macho')}>Toggle Macho</Button>
        <Button onClick={() => toggle('Hello')}>Toggle Hello</Button>
        <Button onClick={() => toggle('World')}>Toggle World</Button>
      </Stack>
    </div>
  );
}
```

```jsx demo title=useToggleã«å¼•æ•°ã‚’æ¸¡ã•ãªã‹ã£ãŸå ´åˆ
function Demo() {
  const [state, { toggle, setLeft, setRight }] = useToggle();

  return (
    <div>
      <p>Effectsï¼š{state ? 'World' : 'Hello'}</p>
      <Stack isInline spacing='2'>
        <Button onClick={() => toggle()}>Toggle</Button>
        <Button onClick={() => toggle(true)}>Toggle Hello</Button>
        <Button onClick={() => toggle(false)}>Toggle World</Button>
      </Stack>
    </div>
  );
}
```

##### useToggle ã®æˆ»ã‚Šå€¤ actions ã® 1 ã¤ setLeft é–¢æ•°

```js
const setLeft = () => setState(defaultValue);
```

ã“ã‚Œã¯`defaultValue`ã‚’`setState`ã«æ¸¡ã™é–¢æ•° ğŸ‘€

```jsx demo
function Demo() {
  const [state, { toggle, setLeft, setRight }] = useToggle('Hello', 'World');

  return (
    <div>
      <p>Effectsï¼š{state}</p>
      <Stack isInline spacing='2'>
        <Button onClick={() => toggle()}>Toggle</Button>
        <Button onClick={setLeft}>Set Hello</Button>
      </Stack>
    </div>
  );
}
```

##### useToggle ã®æˆ»ã‚Šå€¤ actions ã® 1 ã¤ setRight é–¢æ•°

```js
const setRight = () => setState(reverseValueOrigin);
```

ã“ã‚Œã¯å…ˆè¿°ã®`reverseValueOrigin`ã‚’`setState`ã«æ¸¡ã™é–¢æ•° ğŸ‘€

```jsx demo
function Demo() {
  const [state, { toggle, setLeft, setRight }] = useToggle('Hello', 'World');

  return (
    <div>
      <p>Effectsï¼š{state}</p>
      <Stack isInline spacing='2'>
        <Button onClick={() => toggle()}>Toggle</Button>
        <Button onClick={setRight}>Set World</Button>
      </Stack>
    </div>
  );
}
```

## ã¾ã¨ã‚

ã“ã®ãƒ•ãƒƒã‚¯ã‚¹ã¯ã„ã‚ã‚“ãªç”¨é€”ã«å¯¾å¿œã§ãã‚‹ã‚ˆã†ã«æ±ç”¨çš„ã«ä½œã‚‰ã‚Œã¦ã„ã¦å‹‰å¼·ã«ãªã‚‹ï¼  
ãŸã ã¯ã˜ã‚ã¯æ±ç”¨çš„ã§ãªãã¦ã‚‚ã€ã‚·ãƒ³ãƒ—ãƒ«ãªãƒ­ã‚¸ãƒƒã‚¯ã§ã‚‚å…±é€šåŒ–ã™ã‚‹ã®ã¯ç°¡å˜ãã†ï¼

ã»ã‹ã®ãƒ•ãƒƒã‚¯ã‚¹ã‚‚èª­ã‚“ã§å­¦ã¶ï¼ï¼