---
title: Gatsbyã®useStaticQueryã¨ã¯ï¼Ÿ
date: '2020-05-19T22:00:00Z'
description: ''
featured: false
cover: ./cover.jpeg
tags:
  - Gatsby
---

import InlineCode from '../../../src/components/MDXComponents/InlineCode';
import Callout from '../../../src/components/widgetComponents/Callout';

`useStaticQuery`ã¯ GraphQL ã‚¯ã‚¨ãƒªã‚’å—ã‘å–ã£ã¦ã€ãƒ‡ãƒ¼ã‚¿ã‚’è¿”ã™ hook ã§ã™ã€‚

## StaticQuery ã¨ useStaticQuery ã®é•ã„

React Hooks ã®ç™»å ´ã«ã‚ˆã£ã¦`useStaticQuery`ãŒå®Ÿè£…ã•ã‚Œã‚‹ã¾ã§ã¯ã€  
`StaticQuery`ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ãƒ¬ãƒ³ãƒ€ãƒ¼ãƒ—ãƒ­ãƒƒãƒ—ã‚¹ã‚’ä½¿ã£ã¦ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã—ãŸã€‚

`StaticQuery`ã‚’ä½¿ã†å ´åˆã¨ã€`useStaticQuery`ã‚’ä½¿ã†å ´åˆã®é•ã„ã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

```jsx title=StaticQuryã‚’ä½¿ã†å ´åˆ
import React from 'react';
import { StaticQuery, graphql } from 'gatsby';

const Header = () => {
  return (
    <StaticQuery
      query={graphql`
        query {
          site {
            siteMetadata {
              title
            }
          }
        }
      `}
      render={data => (
        <header>
          <h1>{data.site.siteMetadata.title}</h1>
        </header>
      )}
    />
  );
};

export default Header;
```

```jsx title=useStaticQueryã‚’ä½¿ã†å ´åˆ
import React from 'react';
import { useStaticQuery, graphql } from 'gatsby';

const Header = () => {
  const { site } = useStaticQuery(
    graphql`
      query {
        site {
          siteMetadata {
            title
          }
        }
      }
    `
  );

  return (
    <header>
      <h1>{site.siteMetadata.title}</h1>
    </header>
  );
};

export default Header;
```

<Callout emoji='ğŸ˜„'>éšå±¤ã‚‚æµ…ããªã£ã¦ã‚·ãƒ³ãƒ—ãƒ«ã§ã™ã­ï¼</Callout>

## useStaticQuery ã¨ã¯ï¼Ÿ

<Callout emoji='ğŸ¤”'>
  ãã‚‚ãã‚‚<InlineCode>useStaticQuery</InlineCode>ã£ã¦ã©ã‚“ãªã¨ãã«ä½¿ã†ã®ï¼Ÿ
</Callout>

`StaticQuery`ã€ã‚ã‚‹ã„ã¯ãã‚Œã‚’ hook ã§æ‰±ãˆã‚‹`useStaticQuery`ã¯ã€  
ã‚ã‚‰ã‚†ã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ GraphQL ã‚¯ã‚¨ãƒªã‚’ä»‹ã—ã¦ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ãã‚Œã«å¯¾ã—ã€ãƒšãƒ¼ã‚¸ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ã—ã‹ä½¿ã†ã“ã¨ã®ã§ããªã„page query ãŒã‚ã‚Šã¾ã™ã€‚  
ï¼ˆãƒšãƒ¼ã‚¸ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯ç‰¹å®šã® URL ã«å¯¾å¿œã™ã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ã™ï¼‰

## ãƒšãƒ¼ã‚¸ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ã®ã¿ä½¿ãˆã‚‹queryã¨ã¯ï¼Ÿ

ä¾‹ãˆã°ãƒšãƒ¼ã‚¸ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ä»¥ä¸‹ã®ã‚ˆã†ã«ã€  
`graphql`ã‚¿ã‚°ä»˜ããƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒªãƒ†ãƒ©ãƒ«ã‚’å®šæ•°ã«ä»£å…¥ã— export ã—ã¾ã™ã€‚  
ã™ã‚‹ã¨ã€ãƒšãƒ¼ã‚¸ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯`data`ã¨ã„ã†propsã§GraphQLã‚¯ã‚¨ãƒªã®çµæœã‚’å¾—ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

```jsx title=src/pages/index.jsx
import React from 'react'
import { graphql } from 'gatsby'

const TopPage = ({ data }) => (
  <div>
    {data.site.siteMetadata.title}
  </div>
)

export const query = graphql`
  query HomePageQuery {
    site {
      siteMetadata {
        title
      }
    }
  }
`;

export default TopPage;
```

page query ã¨`StaticQuery`ã€`useStaticQuery`ã®é•ã„ã¯ã€  
`StaticQuery`ã€`useStaticQuery`ãŒã‚ã‚‰ã‚†ã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ä½¿ãˆã‚‹ã®ã«å¯¾ã—ã€page queryã¯ãƒšãƒ¼ã‚¸ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ã¿ã§ä½¿ãˆã‚‹ã€‚  
ã¨ã„ã†ã»ã‹ã«ã€  
page queryã¯ã‚¯ã‚¨ãƒªã«å¤‰æ•°ã‚’ä½¿ã†ã“ã¨ãŒã§ãã‚‹ã¨ã„ã†ãƒ¡ãƒªãƒƒãƒˆãŒã‚ã‚Šã¾ã™ã€‚
