---
title: ã‚µã‚¤ãƒˆå†…è¨˜äº‹ã¸ã®ã‚µãƒ ãƒä»˜ããƒªãƒ³ã‚¯ã‚’è¡¨ç¤ºã™ã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½œã£ãŸ
date: '2020-05-19T21:00:00Z'
description: ''
featured: false
cover: ./cover.jpeg
tags:
  - æŠ€è¡“ãƒ–ãƒ­ã‚°
  - Gatsby
---

import Paragraph from '../../../src/components/MDXComponents/Paragraph';
import Callout from '../../../src/components/widgetComponents/Callout';
import ExternalLink from '../../../src/components/widgetComponents/ExternalLink';
import PostLink from '../../../src/components/widgetComponents/PostLink';

è¨˜äº‹å†…ã«åŒã˜ãƒ–ãƒ­ã‚°å†…ã®è¨˜äº‹ã¸ã®ãƒªãƒ³ã‚¯ã‚’è²¼ã‚‹ã“ã¨ãŒã‚ã£ã¦ã€ãƒªãƒƒãƒã«è¡¨ç¤ºã§ããŸã‚‰ãªãã¨æ€ã£ãŸã®ã§ã‚„ã£ã¦ã¿ãŸã€‚

<Paragraph textAlign='center'>â†“ ã“ã‚“ãªã®</Paragraph>
<PostLink to='/blog/what-is-mdx/' />

## ä½¿ã„æ–¹

ãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ`.mdx`ï¼‰å†…ã«ä»¥ä¸‹ã®ã‚ˆã†ã«æ›¸ãã¾ã™ï¼  

```md title=mdx
## ãƒãƒƒãƒãƒ§

**ãƒãƒƒãƒãƒ§**ã¯ã„ã„ãï¼  
**é¡ãŒå¤§å¥½ã**ã ãï¼  
ã“ã‚“ãªæ„Ÿã˜ã§ãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ã®è¨˜è¿°ãŒã‚ã‚‹ãï¼

ã•ã‚å‡ºã‚‹ã  
ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒå‡ºã‚‹ã

ã§ãŸï¼ï¼
<PostLink to='/blog/what-is-mdx' />
```

<Callout emoji='ğŸ˜„'>ãƒ‘ã‚¹ã‚’æŒ‡å®šã™ã‚‹ã ã‘ã ã‹ã‚‰ç°¡å˜ã ï¼</Callout>

## ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå¤±æ•—ä¾‹

ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ã€‚

```jsx title=PostLink.jsx
import React from 'react';
import { useStaticQuery, graphql, Link } from 'gatsby';
import { Box,Flex, Text } from '@chakra-ui/core';
import Img from 'gatsby-image';

import Tags from '../Tags';

const PostLink = ({ to, ...props }) => {
  const { mdx } = useStaticQuery(graphql`
    {
      mdx(fields: { slug: { eq: ${to} } }) {
        frontmatter {
          cover {
            childImageSharp {
              fluid {
                ...GatsbyImageSharpFluid
              }
            }
          }
          tags
          description
          date(formatString: "YYYYå¹´MMæœˆDDæ—¥")
        }
        excerpt(pruneLength: 100)
      }
    }
  `);

  if (!mdx) return null;

  return (
    <Flex justify='center'>
      <Link to={mdx.fields.slug}>
        <Box
          maxW='sm'
          p='2'
          borderWidth='1px'
          rounded='lg'
          overflow='hidden'
          {...props}
        >
          <Img
            fluid={mdx.frontmatter.cover.childImageSharp.fluid}
            alt='post cover'
          />
          <Tags plain post={mdx} fontSize='xs' />
          <Text textAlign='right'>{mdx.frontmatter.date}</Text>
          <Box p='4'>{mdx.frontmatter.description || mdx.excerpt}</Box>
        </Box>
      </Link>
    </Flex>
  );
};
```

ã¨è¨€ã„ãŸã„ã¨ã“ã‚ãªã‚“ã§ã™ãŒã€ã€  
GraphQLã®ã‚¯ã‚¨ãƒªéƒ¨åˆ†ã§ã‚¨ãƒ©ãƒ¼ãŒå‡ºã¦ã—ã¾ã„ã¾ã™ã€‚

`String interpolation is not allowed in graphql tag`

æ–‡å­—åˆ—ã®åŸ‹ã‚è¾¼ã¿ã¯ã§ããªã„ã€‚  
`useStaticQuery`ã¯æ–‡å­—é€šã‚Šé™çš„ãªã‚¯ã‚¨ãƒªã§å‹•çš„ã«ã¯ç”Ÿæˆå‡ºæ¥ãªã„ã‚ˆã†ã§ã™ã€‚  


## ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆæˆåŠŸä¾‹

æ°—ã‚’å–ã‚Šç›´ã—ã¦åˆ¥ã®æ–¹æ³•ã§ï¼ğŸ’ª

ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ã€‚

```jsx title=PostLink.jsx
import React from 'react';
import { useStaticQuery, graphql, Link } from 'gatsby';
import { Box,Flex, Text } from '@chakra-ui/core';
import Img from 'gatsby-image';

import Tags from '../Tags';

const PostLink = ({ to, ...props }) => {
  const { allMdx } = useStaticQuery(graphql`
    {
      allMdx {
        edges {
          node {
            frontmatter {
              cover {
                childImageSharp {
                  fluid {
                    ...GatsbyImageSharpFluid
                  }
                }
              }
              tags
              description
              date(formatString: "YYYYå¹´MMæœˆDDæ—¥")
            }
            excerpt(pruneLength: 100)
            fields {
              slug
            }
          }
        }
      }
    }
  `);

  const mdx = allMdx.edges.find(edge => edge.node.fields.slug === to)?.node;

  if (!mdx) return null;

  return (
    <Flex justify='center'>
      <Link to={mdx.fields.slug}>
        <Box
          maxW='sm'
          p='2'
          borderWidth='1px'
          rounded='lg'
          overflow='hidden'
          {...props}
        >
          <Img
            fluid={mdx.frontmatter.cover.childImageSharp.fluid}
            alt='post cover'
          />
          <Tags plain post={mdx} fontSize='xs' />
          <Text textAlign='right'>{mdx.frontmatter.date}</Text>
          <Box p='4'>{mdx.frontmatter.description || mdx.excerpt}</Box>
        </Box>
      </Link>
    </Flex>
  );
};

export default PostLink;
```

å†…å®¹ã¯ä»¥ä¸‹ã®æµã‚Œã§ã™ã€‚

1. `useStaticQuery`ã§å…¨MDXã‚’å–å¾—
2. å…¨MDXã®ä¸­ã‹ã‚‰ã€æŒ‡å®šã™ã‚‹MDX1ã¤ã‚’æ¢ã™
3. è¦‹ã¤ã‹ã‚‰ãªã‘ã‚Œã°ä½•ã‚‚è¡¨ç¤ºã—ãªã„
4. è¦‹ã¤ã‹ã‚Œã°è¡¨ç¤º

ã§ã™ã€‚

ãã‚Œã§ã¯ã‚³ãƒ¼ãƒ‰ã¨å…±ã«è©³ã—ãè¦‹ã¦ã„ãã¾ã—ã‚‡ã†ã€‚

### useStaticQueryã§å…¨MDXã‚’å–å¾—

`useStaticQuery`ã¯GraphQLã‚¯ã‚¨ãƒªã‚’å—ã‘å–ã£ã¦ã€ãƒ‡ãƒ¼ã‚¿ã‚’è¿”ã™hookã§ã™ã€‚

è©²å½“ã‚³ãƒ¼ãƒ‰ã¯ã“ã¡ã‚‰ã§ã™ã€‚
```jsx
const { allMdx } = useStaticQuery(graphql`
  {
    allMdx {  // ã™ã¹ã¦ã®MDX
      edges {
        node {
          frontmatter {
            cover {  // ã‚µãƒ ãƒç”»åƒæƒ…å ±
              childImageSharp {
                fluid {
                  ...GatsbyImageSharpFluid
                }
              }
            }
            tags  // ã‚¿ã‚°è¨­å®š
            description  // descriptionè¨­å®š
            date(formatString: "YYYYå¹´MMæœˆDDæ—¥")  // æ—¥ä»˜è¨­å®šã€ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã¯YYYYå¹´MMæœˆDDæ—¥
          }
          excerpt(pruneLength: 100)  // GatsbyãŒæŠœç²‹ã—ãŸå†’é ­éƒ¨åˆ†ã€‚descriptionãŒè¨­å®šã•ã‚Œã¦ãªã‘ã‚Œã°ã“ã¡ã‚‰ã‚’ä½¿ã†
          fields {
            slug  // ã‚¹ãƒ©ãƒƒã‚°ã€‚ä»»æ„ã®mdxã‚’è¦‹ã¤ã‘å‡ºã™ãŸã‚ã«ä½¿ã†
          }
        }
      }
    }
  }
`);
```

`useStaticQuery`ã«ã¤ã„ã¦è©³ã—ãã¯ã“ã¡ã‚‰ã‚’ã©ã†ãï¼

<PostLink to='/blog/use-static-query/' />

### å…¨MDXã®ä¸­ã‹ã‚‰ã€æŒ‡å®šã™ã‚‹MDX1ã¤ã‚’æ¢ã™

MDXãŒã‚‚ã¤slugæƒ…å ±ã¨ã€propsã®`to`

```jsx
<PostLink to='/blog/what-is-mdx' />
```

ãŒä¸€è‡´ã™ã‚‹ã‚‚ã®ã‚’æ¢ã—ã¾ã™ã€‚

è©²å½“ã‚³ãƒ¼ãƒ‰ã¯ã“ã¡ã‚‰ã§ã™ã€‚

```jsx
const mdx = allMdx.edges.find(edge => edge.node.fields.slug === to)?.node;
```

### MDXè¦‹ã¤ã‹ã‚‰ãªã‘ã‚Œã°ä½•ã‚‚è¡¨ç¤ºã—ãªã„

è©²å½“ã‚³ãƒ¼ãƒ‰ã¯ã“ã¡ã‚‰ã§ã™ã€‚

```jsx
if (!mdx) return null;
```

### MDXãŒè¦‹ã¤ã‹ã‚Œã°è¡¨ç¤º

è©²å½“ã‚³ãƒ¼ãƒ‰ã¯ã“ã¡ã‚‰ã§ã™ã€‚

```jsx
return (
  <Flex justify='center'>
    <Link to={mdx.fields.slug}>
      <Box
        maxW='sm'
        p='2'
        borderWidth='1px'
        rounded='lg'
        overflow='hidden'
        {...props}
      >
        <Img
          fluid={mdx.frontmatter.cover.childImageSharp.fluid}
          alt='post cover'
        />
        <Tags plain post={mdx} fontSize='xs' />
        <Text textAlign='right'>{mdx.frontmatter.date}</Text>
        <Box p='4'>{mdx.frontmatter.description || mdx.excerpt}</Box>
      </Box>
    </Link>
  </Flex>
);
```

ç”»åƒã¯å°‘ã—ã§ã‚‚è¡¨ç¤ºé€Ÿåº¦ãŒé€Ÿããªã‚‹ã‚ˆã†ã«ã€<ExternalLink to='https://www.gatsbyjs.org/packages/gatsby-image/'>gatsby-image</ExternalLink>ã‚’ä½¿ã£ã¦ã„ã¾ã™ã€‚

ã‚¿ã‚°ã¨æ—¥ä»˜ã‚’è¡¨ç¤ºã—ã€ãƒ†ã‚­ã‚¹ãƒˆã¯descriptionï¼ˆdescriptionãŒæœªå®šç¾©ãªã‚‰excerptï¼‰ã‚’è¡¨ç¤ºã—ã¦ã„ã¾ã™ã€‚  

ã¡ãªã¿ã«`frontmatter`ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«å„è¨˜äº‹ã§å®šç¾©ã—ã¦ã„ã‚‹ã‚‚ã®ã§ã€`excerpt`ã¯GatsbyãŒæŠœç²‹ã—ãŸå†’é ­éƒ¨åˆ†ã§ã™ã€‚

```md
---
title: ã‚µã‚¤ãƒˆå†…è¨˜äº‹ã¸ã®ã‚µãƒ ãƒä»˜ããƒªãƒ³ã‚¯ã‚’è¡¨ç¤ºã™ã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½œã£ãŸ
date: '2020-05-19T21:00:00Z'
description: ''
featured: false
cover: ./cover.jpeg
tags:
  - Gatsby
---
```

ã“ã‚Œã§ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å‡ºæ¥ä¸ŠãŒã‚Šã§ã™ï¼ï¼

<Callout emoji='ğŸ‰ğŸ‰' bg='orange.100'>
  ä»Šå›ã¿ãŸã„ã«ã“ã‚“ãªé¢¨ã«æ›¸ããŸã„ãªãã£ã¦ã®ãŒå®Ÿç¾ã§ãã‚‹ã—ã€ãã‚ŒãŒå‹‰å¼·ã«ã‚‚ãªã‚‹ã—ã€è‡ªåˆ†ã®æŠ€è¡“ãƒ–ãƒ­ã‚°ã‚’ã‚‚ã¤ã®ã‚ˆãã ãªãï¼
</Callout>